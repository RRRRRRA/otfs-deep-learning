在OTFS符号解调任务中，`SymbolDemodulationMSE.py`、`SymbolDemodulationCE.py`和`SymbolDemodulationCNNMSE.py`三个文件分别对应三种不同的实现方式，核心区别体现在**数据处理方式**、**模型结构**、**损失函数**和**任务目标形式**上，具体如下：


### 1. 任务目标与损失函数的区别
三者三个任务的最终目标都是从接收信号中恢复原始发送的QPSK符号，但目标的“形式”和计算损失的方式不同：

- **`SymbolDemodulationMSE.py`（MSE损失，全连接）**  
  - 目标形式：将原始QPSK符号的**实部和虚部**作为连续值标签（例如QPSK符号`0.707+0.707j`的标签为`[0.707, 0.707]`），输出维度为`3840`（1920个符号×2个维度）。  
  - 损失函数：使用**均方误差（MSE）**，衡量预测的实部/虚部与真实值的平方差，属于**回归任务**。  


- **`SymbolDemodulationCE.py`（交叉熵损失，全连接）**  
  - 目标形式：将QPSK符号映射为**离散类别索引**（QPSK有4种符号，对应索引`0-3`），输出维度为`1920`（每个符号对应1个类别索引）。  
  - 损失函数：使用**交叉熵（CE）**，衡量预测的类别概率分布与真实类别（one-hot形式）的差异，属于**分类任务**。  


- **`SymbolDemodulationCNNMSE.py`（MSE损失，CNN）**  
  - 目标形式：与MSE全连接版本一致，以原始符号的**实部和虚部**为连续标签，但标签被重塑为**二维图像格式**（`2×64×64`，2个通道对应实部/虚部）。  
  - 损失函数：同样使用**均方误差（MSE）**，但输入和输出为二维结构，本质仍是**回归任务**。  


### 2. 输入数据处理的区别
三者对输入特征（接收信号和信道参数）的处理方式不同，直接影响模型的输入格式：

- **`SymbolDemodulationMSE.py` 和 `SymbolDemodulationCE.py`（全连接）**  
  - 输入为**一维向量**：  
    - 接收信号的实部和虚部（`rx[2220:]`的实部+虚部）拼接为`4440`维向量；  
    - 信道参数（路径数量、延迟、增益、多普勒频移）填充后拼接为`16`维向量；  
    - 总输入维度为`4456`（`4440+16`）。  


- **`SymbolDemodulationCNNMSE.py`（CNN）**  
  - 输入为**二维图像**：  
    - 接收信号的实部和虚部被重塑为`74×30`的二维矩阵（对应OTFS的子载波×子符号结构）；  
    - 为适配CNN的输入尺寸，将`74×30`矩阵填充到`128×128`的图像中，形成`2×128×128`的输入（2个通道对应实部/虚部）；  
    - **未使用信道参数**（代码中相关部分被注释），仅基于接收信号的二维结构进行解调。  


### 3. 模型结构的区别
模型的网络架构因输入格式和任务形式不同而完全不同：

- **`SymbolDemodulationMSE.py`（全连接MSE）**  
  - 使用**多层线性层（Linear）** 堆叠：  
    - 输入层（4456→3840）→ 4层隐藏层（3840→3840）→ 输出层（3840→3840）；  
    - 配合批归一化（BatchNorm1d）、Dropout和ReLU激活函数，处理一维向量特征。  


- **`SymbolDemodulationCE.py`（全连接CE）**  
  - 前4层与MSE全连接网络结构一致（线性层+批归一化+Dropout）；  
  - 输出层不同：使用`1920`个并行的线性层（每个对应1个符号），每个线性层输出`4`维（对应4种QPSK符号的概率），最终通过Softmax得到类别分布。  


- **`SymbolDemodulationCNNMSE.py`（CNN-MSE）**  
  - 使用**卷积层（Conv2d）** 提取空间特征：  
    - 输入层（2→32通道，3×3卷积）→ 3层卷积隐藏层（32通道，3×3卷积，含步长为2的下采样）→ 输出层（32→2通道，3×3卷积）；  
    - 配合二维批归一化（BatchNorm2d）和Dropout，保留输入的二维空间结构（子载波×子符号的网格关系）。  


### 4. 核心差异总结
| 维度                | `SymbolDemodulationMSE.py`       | `SymbolDemodulationCE.py`         | `SymbolDemodulationCNNMSE.py`     |
|---------------------|----------------------------------|-----------------------------------|-----------------------------------|
| 任务类型            | 回归（实部/虚部预测）            | 分类（符号类别预测）              | 回归（实部/虚部预测，二维结构）   |
| 输入格式            | 一维向量（4456维，含信道参数）   | 一维向量（4456维，含信道参数）    | 二维图像（2×128×128，不含信道参数）|
| 输出格式            | 一维向量（3840维，实部+虚部）    | 一维向量（1920维，类别索引）      | 二维图像（2×64×64，实部+虚部）   |
| 模型结构            | 全连接网络（Linear）             | 全连接网络（Linear+多输出头）     | 卷积神经网络（Conv2d）            |
| 损失函数            | MSE（均方误差）                  | CE（交叉熵）                      | MSE（均方误差）                   |


简言之，全连接的MSE和CE主要区别在于“回归连续值”还是“分类离散符号”，而CNN-MSE则是通过卷积层利用信号的二维结构进行回归，更贴合OTFS的时频网格特性。
